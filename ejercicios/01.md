# Obtener lista de alumnos desde un archivo JSON

## Descripci√≥n de la actividad

En esta pr√°ctica implementar√°s el endpoint:

```bash
    GET /api/alumnos
```

que permitir√° obtener todos los alumnos registrados en el archivo alumno.json.

El proyecto ya cuenta con la funcionalidad para crear alumnos mediante POST /api/alumnos.
Tu tarea ser√° completar la funcionalidad del GET siguiendo la estructura del proyecto y aplicando buenas pr√°cticas de separaci√≥n por capas y uso de promesas (Promise).

## Objetivo

- Implementar el flujo completo para obtener los alumnos desde el archivo JSON.
- Aplicar la arquitectura de Controller ‚Üí Service ‚Üí Repository.
- Utilizar Promesas para manejar operaciones as√≠ncronas.

## Estructura del proyecto

```kotlin
project/
‚îÇ
‚îú‚îÄ controllers/
‚îÇ   ‚îî‚îÄ alumno.controller.js
‚îú‚îÄ services/
‚îÇ   ‚îî‚îÄ alumno.service.js
‚îú‚îÄ repositories/
‚îÇ   ‚îî‚îÄ alumno.repository.js
‚îú‚îÄ data/
‚îÇ   ‚îî‚îÄ alumno.json
‚îî‚îÄ server.js
```

## Instrucciones

1. Agregar la nueva ruta GET

Edita el archivo `server.js` y agrega la ruta para obtener los alumnos.

```js
import express from "express";
import { _________ } from "../controllers/alumno.controller.js";

const router = express.Router();

// Ruta existente (POST)
// app.post('api/alumnos', crearAlumno);

// üëâ Completa la ruta para obtener alumnos
app.____("/api/alumnos", _________);

export default router;
```

2. **Controlador: alumno.controller.js**

Completa el m√©todo que se encargar√° de recibir la solicitud y enviar la respuesta.

```js
import alumnoService from "../services/alumno.service.js";

// M√©todo para crear alumnos (ya existe arriba)

// üëâ Completa el m√©todo para obtener los alumnos
export const _________ = async (req = request, res = response) => {
  try {
    const alumnos = await alumnoService._________();
    res.status(____).json(_________);
  } catch (error) {
    res.status(____).json({
      mensaje: "Error al obtener alumnos",
      error: error.message,
    });
  }
};
```

3. **Servicio: alumon.service.js**
   El servicio es el intermediario entre el controlador y el repositorio.
   Completa el siguiente m√©todo para llamar a alumnoRepository.

```js
import alumnoRepository from "../repositories/alumno.repository.js";

class AlumnoService {
  // M√©todo para crear alumno (ya existe)

  // üëâ Completa este m√©todo
  async _________() {
    return new Promise(async (resolve, reject) => {
      try {
        const alumnos = await alumnoRepository._________();
        resolve(_________);
      } catch (error) {
        reject(error);
      }
    });
  }
}

export default new AlumnoService();
```

4. **Repositorio: alumno.repository.js**
   Aqu√≠ se realiza la lectura del archivo alumno.json.
   Completa el siguiente m√©todo para devolver el contenido.

```js
import fs from "fs";
import path from "path";

const dataPath = path.resolve("./src/data/alumnos.json");

class AlumnoRepository {
  // M√©todo para guardar alumno (ya existe)

  // Completa este m√©todo
  _________() {
    return new Promise((resolve, reject) => {
      
      fs.readFile(________, "utf-8", (err, data) => {
        if (err) {
          // ¬øSi el archivo esta v√°cio que se debe de regresar?
          if (err.code === "ENOENT") return resolve(______); 

          // Si hay un error relacionado con la lectura del archivo
          return reject(err);
        }

        const alumnos = JSON.parse( _______ || "[]");
        resolve(_________);
      });
    });
  }
}

export default new AlumnoRepository();
```

## Pruebas

1. Realiza primero un POST en:

```bash
    POST http://127.0.0.1:3000/api/alumnos
```

con el cuerpo:

```json
{
  "nombre": "Laura Garc√≠a",
  "edad": 22,
  "carrera": "Contadur√≠a"
}
```

2. Luego ejecuta un **GET** en:

```bash
    GET http://127.0.0.1:3000/api/alumnos
```

3. La respuesta esperada ser√° un arreglo de alumnos:

````json
[
  {
    "id": 1728202324123,
    "nombre": "Laura Garc√≠a",
    "edad": 22,
    "carrera": "Contadur√≠a",
    "fechaRegistro": "2025-10-06T16:14:55.123Z"
  }
]
````
